# Bootstrap ApplicationSet
root:
  source:
    repoURL: https://github.com/nhdinh39/argocd-demo.git
    targetRevision: main

  bootstrap:
    name: bootstrap
    annotations: {}
    automated:
      allowEmpty: false
      prune: true
      selfHeal: true
    syncOptions:
      - Validate=false
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
    paths:
      # - data
      # - egress
      # - ingress
      # - monitoring
      - operations
      - workloads
    ignoreDifferences:
      - group: admissionregistration.k8s.io
        kind: ValidatingWebhookConfiguration
        jqPathExpressions:
          - .webhooks[].failurePolicy
      - group: apps
        kind: Deployment
        jsonPointers:
        - /spec/replicas

  # Argocd Configs Application Set
  argocd:
    name: argocd-configs
    annotations: {}
    automated:
      allowEmpty: false
      prune: true
      selfHeal: true
    syncOptions:
      - Validate=false
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
